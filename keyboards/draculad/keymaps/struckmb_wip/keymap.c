#include QMK_KEYBOARD_H

// #define MAC_SIDE

#ifdef MAC_SIDE
#    include "keymap_german_mac_iso.h"
#else
#    include "keymap_german_linux.h"
#endif /* ifdef MAC_SIDE */

enum layers {
    _QWER = 0,
    _BONE,
#ifdef GAME_ENABLE
    _GAME,
#endif // GAME_ENABLE
    _NAVB,
    _NAVQ,
    _MOUS,
    _MEDI,
    _SYMB,
    _CTRL
};

#ifndef GAME_ENABLE
#    define _GAME 0
#endif // GAME_ENABLE

/* THIS FILE WAS GENERATED!
 *
 * This file was generated by qmk json2c. You may or may not want to
 * edit it directly.
 */

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {                                                                                      //
    [_QWER] = LAYOUT(KC_Q, KC_W, KC_E, KC_R, KC_T, KC_Y, KC_U, KC_I, KC_O, KC_P,                                                                    //
                     LGUI_T(KC_A), LALT_T(KC_S), LCTL_T(KC_D), LSFT_T(KC_F), KC_G, KC_H, RSFT_T(KC_J), RCTL_T(KC_K), LALT_T(KC_L), RGUI_T(KC_SCLN), //
                     KC_Z, KC_X, KC_C, KC_V, KC_B, KC_N, KC_M, KC_COMM, KC_DOT, KC_MINS,                                                            //
                     KC_NO, KC_NO, LT(_MEDI, KC_ESC), LT(_NAVB, KC_ENT), LT(_MOUS, KC_TAB), KC_NO, LT(_SYMB, KC_SPC), LT(_CTRL, KC_BSPC)),

    [_BONE] = LAYOUT(KC_J, KC_D, KC_U, KC_A, KC_X, KC_P, KC_H, KC_L, KC_M, KC_W,                                                                 //
                     LGUI_T(KC_C), LALT_T(KC_T), LCTL_T(KC_I), LSFT_T(KC_E), KC_O, KC_B, RSFT_T(KC_N), RCTL_T(KC_R), LALT_T(KC_S), RGUI_T(KC_G), //
                     KC_F, KC_V, KC_LBRC, KC_QUOT, KC_SCLN, KC_Z, KC_Y, KC_COMM, KC_DOT, KC_K,                                                   //
                     KC_NO, KC_NO, LT(_MEDI, KC_ESC), LT(_NAVQ, KC_ENT), LT(_MOUS, KC_TAB), KC_NO, LT(_SYMB, KC_SPC), LT(_CTRL, KC_BSPC)),

#ifdef GAME_ENABLE
    [_GAME] = LAYOUT(KC_Q, KC_TRNS, KC_E, KC_R, KC_T, KC_Y, KC_U, KC_I, KC_O, KC_P,                      //
                     KC_A, KC_S, KC_D, KC_F, KC_G, KC_H, KC_J, KC_K, KC_L, KC_SCLN,                      //
                     LSFT_T(KC_Z), KC_X, KC_C, KC_V, KC_B, KC_N, KC_M, KC_COMM, KC_DOT, RSFT_T(KC_MINS), //
                     KC_NO, KC_NO, LT(_MEDI, KC_ESC), LT(_NAVQ, KC_ENT), KC_TAB, KC_NO, LT(_SYMB, KC_SPC), LT(_CTRL, KC_BSPC)),
#endif // GAME_ENABLE

    [_NAVB] = LAYOUT(KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_INS, CP_PSTE, CP_COPY, CP_CUT, KC_MINS,       //
                     KC_LGUI, KC_LALT, KC_LCTL, KC_LSFT, OSM_RA, KC_LEFT, KC_DOWN, KC_UP, KC_RGHT, KC_Q, //
                     KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_HOME, KC_PGDN, KC_PGUP, KC_END, CW_TOGG,      //
                     KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_TRNS, KC_DEL),
    [_NAVQ] = LAYOUT(KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_INS, CP_PSTE, CP_COPY, CP_CUT, KC_LBRC,          //
                     KC_LGUI, KC_LALT, KC_LCTL, KC_LSFT, OSM_RA, KC_LEFT, KC_DOWN, KC_UP, KC_RGHT, KC_QUOT, //
                     KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_HOME, KC_PGDN, KC_PGUP, KC_END, CW_TOGG,         //
                     KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_TRNS, KC_DEL),

    [_MOUS] = LAYOUT(KC_NO, KC_NO, KC_BTN4, KC_BTN5, KC_NO, QK_REP, CP_PSTE, CP_COPY, CP_CUT, QK_AREP,        //
                     KC_LGUI, KC_LALT, KC_LCTL, KC_LSFT, OSM_RA, KC_MS_L, KC_MS_D, KC_MS_U, KC_MS_R, KC_BTN3, //
                     KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_WH_L, KC_WH_U, KC_WH_D, KC_WH_R, KC_NO,            //
                     KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_BTN1, KC_BTN2),

    [_MEDI] = LAYOUT(QK_BOOT, DF(_QWER), DF(_GAME), DF(_BONE), KC_NO, RGB_TOG, RGB_MOD, RGB_HUI, RGB_SAI, RGB_VAI, //
                     KC_LGUI, KC_LALT, KC_LCTL, KC_LSFT, OSM_RA, KC_MSTP, KC_MPRV, KC_VOLD, KC_VOLU, KC_MNXT,      //
                     EE_CLR, KC_NO, KC_NO, KC_NO, KC_NO, KC_EJCT, KC_MRWD, KC_BRID, KC_BRIU, KC_MFFD,              //
                     KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_NO, KC_MPLY, KC_MUTE),

    [_SYMB] = LAYOUT(KC_NUBS, KC_7, KC_8, KC_9, KC_0, KC_NO, KC_NO, KC_NO, KC_NO, KC_NO,             //
                     KC_MINS, KC_4, KC_5, KC_6, KC_RBRC, OSM_RA, KC_RSFT, KC_RCTL, KC_LALT, KC_RGUI, //
                     KC_GRV, KC_1, KC_2, KC_3, KC_SLSH, KC_NO, KC_NO, KC_NO, KC_NO, KC_NO,           //
                     KC_NO, KC_NO, KC_EQL, KC_0, KC_BSLS, KC_NO, KC_NO, KC_NO),

    [_CTRL] = LAYOUT(KC_F12, KC_F7, KC_F8, KC_F9, KC_SCRL, KC_NO, DF(_QWER), DF(_BONE), DF(_GAME), QK_BOOT, //
                     KC_F11, KC_F4, KC_F5, KC_F6, KC_PSCR, OSM_RA, KC_RSFT, KC_RCTL, KC_LALT, KC_RGUI,      //
                     KC_F10, KC_F1, KC_F2, KC_F3, KC_PAUS, KC_NO, KC_NO, KC_NO, KC_NO, EE_CLR,              //
                     KC_NO, KC_NO, KC_APP, KC_TRNS, KC_TRNS, KC_NO, KC_NO, KC_NO)};

#if defined(ENCODER_ENABLE) && defined(ENCODER_MAP_ENABLE)
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][NUM_DIRECTIONS] = {

};
#endif // defined(ENCODER_ENABLE) && defined(ENCODER_MAP_ENABLE)

#ifdef OLED_ENABLE
oled_rotation_t oled_init_user(oled_rotation_t rotation) {
    if (is_keyboard_master()) {
        return is_keyboard_left() ? OLED_ROTATION_270 : OLED_ROTATION_90;
    } else {
        return is_keyboard_left() ? OLED_ROTATION_180 : OLED_ROTATION_0;
    }
}

static void render_draculad_logo(void) {
    static const char PROGMEM drac_logo[] = {// 'oledlogo', 128x64px
                                             0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x1c, 0x1c, 0x1c, 0x3c, 0xfc, 0xec, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf8, 0x98, 0x1c, 0x1c, 0x0c, 0x0c, 0x0c, 0x1c, 0x1c, 0x9c, 0xf8, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xe0, 0xf0,
                                             0xf8, 0xf8, 0xfc, 0xfc, 0xfe, 0xfe, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xfe, 0xfe, 0xfc, 0xfc, 0xf8, 0xf8, 0xf0, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x1c, 0x9c, 0x9c, 0x1c, 0x1c, 0x1c, 0x1c, 0x9c, 0x8c, 0x8c, 0x0f, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x73, 0x71, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x20, 0x18, 0x1e, 0x0f, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x03, 0x03, 0x03, 0x03, 0x07, 0x07, 0x0f, 0x1f, 0x3f,
                                             0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xf8, 0xe0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x7f, 0xe3, 0xc1, 0x80, 0x80, 0x80, 0x80, 0x81, 0xc1, 0xe3, 0x7f, 0x3e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xfc, 0x8e, 0x0e, 0x0e, 0x0c, 0x1c, 0x38, 0x70, 0xe0, 0xc0, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0xf8, 0xfc, 0xfc, 0xfe, 0xe1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00,
                                             0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xf0, 0x30, 0x31, 0x31, 0xf1, 0xf1, 0x31, 0x31, 0x31, 0x70, 0xfc, 0x9c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0xcc, 0xfc, 0x3c, 0x1c, 0x1c, 0x0c, 0x0c, 0x0c, 0x0c, 0x1c, 0x3c, 0xfc, 0xcc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x18, 0x18, 0x38, 0x30, 0x30, 0x70, 0xe0, 0xe1, 0xe1, 0xc1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x30, 0xf0, 0xf0, 0xf8, 0xf8, 0xff, 0xff, 0xff, 0xff, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x3f, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x87, 0x9f, 0x18, 0x18, 0x00, 0x01, 0x0f, 0x1c, 0x30, 0x30, 0x38, 0x1f,
                                             0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0f, 0x0e, 0x1c, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1c, 0x0e, 0xcf, 0xc3, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x06, 0x07, 0x03, 0x03, 0x03, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x03, 0x87, 0xc7, 0xff, 0xff, 0xff, 0x7f, 0x47, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0x70, 0x3f, 0x3f, 0x1f, 0x0f, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1b, 0x1f, 0x1c, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xff, 0x83, 0x83, 0x03, 0x1f,
                                             0xff, 0xc3, 0x03, 0x03, 0x87, 0xff, 0xf9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x1f, 0x3f, 0xff, 0x0f, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf8, 0x1c, 0x0e, 0x06, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03, 0x07, 0x07, 0x06, 0x0e, 0x1c, 0xf8, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x03, 0x03, 0x03, 0xf9, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                                             0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x3f, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3f, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3f, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
    oled_write_raw_P(drac_logo, sizeof(drac_logo));
}

bool oled_task_user(void) {
    if (is_keyboard_master()) {
        // QMK Logo and version information
        // clang-format off
        static const char PROGMEM qmk_logo[] = {
            0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0xa0,0xa1,0xa2,0xa3,0xa4,
            0xa5,0xa6,0xa7,0xa8,0xa9,0xc0,0xc1,0xc2,0xc3,0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0};
        // clang-format on
        oled_set_cursor(0, 0);
        oled_write_P(qmk_logo, false);

        oled_write_P(PSTR("\nDraculad\n\n"), false);
#    ifdef MAC_SIDE
        oled_write_P(PSTR("MAC@rev1.0"), true);
#    else
        oled_write_P(PSTR("LIN@rev1.0"), true);
#    endif /* ifdef MAC_SIDE */

        // Host Keyboard Layer Status
        oled_write_P(PSTR("\n\nB: "), false);
        switch (get_highest_layer(default_layer_state)) {
            case _QWER:
                oled_write_P(PSTR("QWER  "), false);
                break;
            case _BONE:
                oled_write_P(PSTR("BONE  "), false);
                break;
#    ifdef GAME_ENABLE
            case _GAME:
                oled_write_P(PSTR("GAME  "), false);
                break;
#    endif // GAME_ENABLE
            default:
                oled_write_P(PSTR("UNDEF!"), false);
        }
        oled_write_P(PSTR("\n\nL: "), false);
        switch (get_highest_layer(layer_state | default_layer_state)) {
            case _NAVB:
            case _NAVQ:
                oled_write_P(PSTR("Navi  "), false);
                break;
            case _MOUS:
                oled_write_P(PSTR("Mouse "), false);
                break;
            case _MEDI:
                oled_write_P(PSTR("Media "), false);
                break;
            case _SYMB:
                oled_write_P(PSTR("Symbol"), false);
                break;
            case _CTRL:
                oled_write_P(PSTR("Ctrl  "), false);
                break;
            default:
                oled_write_P(PSTR("      "), false);
        }

        // determin if ctl/gui keys are swapped
        keymap_config.raw = eeconfig_read_keymap();
        if (keymap_config.swap_lctl_lgui || keymap_config.swap_rctl_rgui) {
            oled_write_P(PSTR("S"), true);
        } else {
            oled_write_P(PSTR(" "), false);
        }
    } else {
        render_draculad_logo();
    }
    return false;
}

#endif // OLED_ENABLE
